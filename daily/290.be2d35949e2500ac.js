"use strict";(self.webpackChunkDaily=self.webpackChunkDaily||[]).push([[290],{6290:(J,C,s)=>{s.r(C),s.d(C,{ConfigSystemModule:()=>Y});var f=s(9808),d=s(8753),t=s(5e3),l=s(2382),S=s(9597),r=s(4953),g=s(2340),y=s(520);let v=(()=>{class o{constructor(e){this.http=e}getAllConfiguration(){return this.http.get(g.N.url+r.X.SYSTEM_CONFIG_ENDPOINTS.CONFIG_SERVICE+r.X.SYSTEM_CONFIG_ENDPOINTS.SYSTEM_SETTING+r.X.CRUD.GET_ALL,{})}updateConfiguration(e){return this.http.post(g.N.url+r.X.SYSTEM_CONFIG_ENDPOINTS.CONFIG_SERVICE+r.X.SYSTEM_CONFIG_ENDPOINTS.SYSTEM_SETTING+r.X.CRUD.UPDATE,{updateSystemSettingModelRequestList:e})}refresh(){return this.http.post(g.N.url+r.X.SYSTEM_CONFIG_ENDPOINTS.CONFIG_SERVICE+r.X.SYSTEM_CONFIG_ENDPOINTS.ACTUATOR+r.X.SYSTEM_CONFIG_ENDPOINTS.REFRESH,{})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(y.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var T=s(111),N=s(6458),b=s(845),h=s(3787),_=s(1424),I=s(1208);function F(o,i){1&o&&t._UZ(0,"button",5)}function x(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"span",11)(1,"input",12,13),t.NdJ("input",function(){t.CHM(e);const c=t.MAs(2),a=t.oxw().$implicit,p=t.oxw().$implicit;return t.oxw().changeDetected(c.value,a,p.key)}),t.qZA(),t.TgZ(3,"label",14),t._uU(4),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.s9C("id",e.label),t.s9C("formControlName",e.code),t.xp6(2),t.s9C("for",e.label),t.xp6(1),t.hij("",e.description," ")}}function L(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"span",15)(1,"p-checkbox",16,17),t.NdJ("onChange",function(){t.CHM(e);const c=t.MAs(2),a=t.oxw().$implicit,p=t.oxw().$implicit;return t.oxw().changeDetected(c.model,a,p.key)}),t.qZA(),t.TgZ(3,"label",18),t._uU(4),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.s9C("formControlName",e.code),t.Q6J("binary",!0)("trueValue",1)("falseValue",0),t.xp6(3),t.hij("",e.description," ")}}function E(o,i){if(1&o&&(t.TgZ(0,"div",8),t.YNc(1,x,5,4,"span",9),t.YNc(2,L,5,5,"span",10),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",2==e.type),t.xp6(1),t.Q6J("ngIf",1==e.type)}}function O(o,i){if(1&o&&(t.TgZ(0,"p-accordionTab",6)(1,"div"),t.YNc(2,E,3,2,"div",7),t.qZA()()),2&o){const e=i.$implicit;t.s9C("header",e.key.toLocaleUpperCase()),t.xp6(2),t.Q6J("ngForOf",e.value)}}let A=(()=>{class o{constructor(e,n,c){this.configSystemService=e,this.privilegesService=n,this.footprintService=c,this.systemConfigForm=new l.cw({}),this.changedList=[]}ngOnInit(){this.enableUpdate=this.privilegesService.checkPrivileges(S.$.CONFIGRATION.UPDATE),this.getData()}getData(){this.configSystemService.getAllConfiguration().subscribe(e=>{this.systemConfigs=e.payload.systemSettingModelForApplicationHashMap,console.log("Config System:",this.systemConfigs);let n={},c={};for(const p in this.systemConfigs)this.systemConfigs[p].map(m=>{let u=m.code;n[u]=new l.NI(m.value,[]),c[u]=1==m.type?+m.value:m.value});console.log(n),console.log(c);let a=JSON.parse(JSON.stringify(c));this.footprintService.handleOldValue(a),this.systemConfigForm=new l.cw(n),this.systemConfigForm.patchValue(c)})}changeDetected(e,n,c){if(this.changedList.length){let a=this.changedList.find(p=>p.code==n.code);a?a.value=e:this.fillList(n,c)}else this.fillList(n,c)}fillList(e,n){this.changedList.push({code:e.code,value:e.value,applicationName:n})}intValue(e){return!!Number(e)}submit(){console.log(this.systemConfigForm.value),this.footprintService.handleNewValue(this.systemConfigForm.value),this.configSystemService.updateConfiguration(this.changedList).subscribe(e=>{console.log(e),this.configSystemService.refresh().subscribe(),this.getData()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v),t.Y36(T.y),t.Y36(N.x))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-config-list"]],decls:6,vars:6,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","mt-2","mb-3","flex","justify-content-end"],["pButton","","class","btn btn-basic mr-3","type","submit","label","Submit",4,"ngIf"],[3,"multiple"],[3,"header",4,"ngFor","ngForOf"],["pButton","","type","submit","label","Submit",1,"btn","btn-basic","mr-3"],[3,"header"],["class","inline-block",4,"ngFor","ngForOf"],[1,"inline-block"],["class","p-float-label mt-4 mr-7",4,"ngIf"],["class","check mt-4 mr-7",4,"ngIf"],[1,"p-float-label","mt-4","mr-7"],["type","text","pInputText","","maxlength","50",2,"width","22vw",3,"id","formControlName","input"],["input",""],[3,"for"],[1,"check","mt-4","mr-7"],[1,"pr-2",3,"binary","trueValue","falseValue","formControlName","onChange"],["check",""],[1,"check-label"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(1,"div",1),t.YNc(2,F,1,0,"button",2),t.qZA(),t.TgZ(3,"p-accordion",3),t.YNc(4,O,3,2,"p-accordionTab",4),t.ALo(5,"keyvalue"),t.qZA()()),2&e&&(t.Q6J("formGroup",n.systemConfigForm),t.xp6(2),t.Q6J("ngIf",n.enableUpdate),t.xp6(1),t.Q6J("multiple",!0),t.xp6(1),t.Q6J("ngForOf",t.lcZ(5,4,n.systemConfigs)))},directives:[l._Y,l.JL,l.sg,f.O5,b.Hq,h.UQ,f.sg,h.US,l.Fj,_.o,l.nD,l.JJ,l.u,I.XZ],pipes:[f.Nd],styles:[""]}),o})();const Z=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-config-system-layout"]],decls:6,vars:0,consts:[[1,"services-container","layout-margin"],[1,"page-title"],[1,"head-icon","pi","pi-cog"],[1,"text"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"span",2),t.TgZ(3,"span",3),t._uU(4,"System Configuration "),t.qZA()(),t._UZ(5,"app-config-list"),t.qZA())},directives:[A],styles:[""]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.Bz.forChild(Z)],d.Bz]}),o})();var D=s(1018);let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.ez,D.m,M]]}),o})()}}]);