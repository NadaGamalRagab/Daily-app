"use strict";(self.webpackChunkDaily=self.webpackChunkDaily||[]).push([[290],{6290:(G,C,s)=>{s.r(C),s.d(C,{ConfigSystemModule:()=>J});var f=s(9808),d=s(8753),t=s(5e3),a=s(2382),S=s(9597),l=s(4953),g=s(2340),y=s(520);let v=(()=>{class n{constructor(e){this.http=e}getAllConfiguration(){return this.http.get(g.N.url+l.X.SYSTEM_CONFIG_ENDPOINTS.CONFIG_SERVICE+l.X.SYSTEM_CONFIG_ENDPOINTS.SYSTEM_SETTING+l.X.CRUD.GET_ALL,{})}updateConfiguration(e){return this.http.post(g.N.url+l.X.SYSTEM_CONFIG_ENDPOINTS.CONFIG_SERVICE+l.X.SYSTEM_CONFIG_ENDPOINTS.SYSTEM_SETTING+l.X.CRUD.UPDATE,{updateSystemSettingModelRequestList:e})}refresh(){return this.http.post(g.N.url+l.X.SYSTEM_CONFIG_ENDPOINTS.CONFIG_SERVICE+l.X.SYSTEM_CONFIG_ENDPOINTS.ACTUATOR+l.X.SYSTEM_CONFIG_ENDPOINTS.REFRESH,{})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(y.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var T=s(111),_=s(6458),N=s(845),h=s(3787),b=s(1424),I=s(1208);function x(n,i){1&n&&t._UZ(0,"button",5)}function E(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",12)(1,"input",13,14),t.NdJ("input",function(){t.CHM(e);const c=t.MAs(2),r=t.oxw(2).$implicit,p=t.oxw().$implicit;return t.oxw().changeDetected(c.value,r,p.key)}),t.qZA(),t.TgZ(3,"label",15),t._uU(4),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.s9C("id",e.label),t.s9C("formControlName",e.code),t.xp6(2),t.s9C("for",e.label),t.xp6(1),t.hij("",e.description," ")}}function F(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",16)(1,"p-checkbox",17,18),t.NdJ("onChange",function(){t.CHM(e);const c=t.MAs(2),r=t.oxw(2).$implicit,p=t.oxw().$implicit;return t.oxw().changeDetected(c.model,r,p.key)}),t.qZA(),t.TgZ(3,"label",19),t._uU(4),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.s9C("formControlName",e.code),t.Q6J("binary",!0)("trueValue",1)("falseValue",0),t.xp6(3),t.hij("",e.description," ")}}function L(n,i){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,E,5,4,"span",10),t.YNc(2,F,5,5,"span",11),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",2==e.type),t.xp6(1),t.Q6J("ngIf",1==e.type)}}function O(n,i){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,L,3,2,"span",9),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf","ACCESS_TOKEN_KEY"!==e.code)}}function A(n,i){if(1&n&&(t.TgZ(0,"p-accordionTab",6)(1,"div"),t.YNc(2,O,2,1,"div",7),t.qZA()()),2&n){const e=i.$implicit;t.s9C("header",e.key.toLocaleUpperCase()),t.xp6(2),t.Q6J("ngForOf",e.value)}}let Z=(()=>{class n{constructor(e,o,c){this.configSystemService=e,this.privilegesService=o,this.footprintService=c,this.systemConfigForm=new a.cw({}),this.changedList=[]}ngOnInit(){this.enableUpdate=this.privilegesService.checkPrivileges(S.$.CONFIGRATION.UPDATE),this.getData()}getData(){this.configSystemService.getAllConfiguration().subscribe(e=>{this.systemConfigs=e.payload.systemSettingModelForApplicationHashMap,console.log("Config System:",this.systemConfigs);let o={},c={};for(const p in this.systemConfigs)this.systemConfigs[p].map(m=>{let u=m.code;o[u]=new a.NI(m.value,[]),c[u]=1==m.type?+m.value:m.value});console.log(o),console.log(c);let r=JSON.parse(JSON.stringify(c));this.footprintService.handleOldValue(r),this.systemConfigForm=new a.cw(o),this.systemConfigForm.patchValue(c)})}changeDetected(e,o,c){if(this.changedList.length){let r=this.changedList.find(p=>p.code==o.code);r?r.value=e:this.fillList(o,c)}else this.fillList(o,c)}fillList(e,o){this.changedList.push({code:e.code,value:e.value,applicationName:o})}intValue(e){return!!Number(e)}submit(){console.log(this.systemConfigForm.value),this.footprintService.handleNewValue(this.systemConfigForm.value),this.configSystemService.updateConfiguration(this.changedList).subscribe(e=>{console.log(e),this.configSystemService.refresh().subscribe(),this.getData()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v),t.Y36(T.y),t.Y36(_.x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-list"]],decls:6,vars:6,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","mt-2","mb-3","flex","justify-content-end"],["pButton","","class","btn btn-basic mr-3","type","submit","label","Submit",4,"ngIf"],[3,"multiple"],[3,"header",4,"ngFor","ngForOf"],["pButton","","type","submit","label","Submit",1,"btn","btn-basic","mr-3"],[3,"header"],["class","inline-block",4,"ngFor","ngForOf"],[1,"inline-block"],[4,"ngIf"],["class","p-float-label mt-4 mr-7",4,"ngIf"],["class","check mt-4 mr-7",4,"ngIf"],[1,"p-float-label","mt-4","mr-7"],["type","text","pInputText","","maxlength","50",2,"width","22vw",3,"id","formControlName","input"],["input",""],[3,"for"],[1,"check","mt-4","mr-7"],[1,"pr-2",3,"binary","trueValue","falseValue","formControlName","onChange"],["check",""],[1,"check-label"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.YNc(2,x,1,0,"button",2),t.qZA(),t.TgZ(3,"p-accordion",3),t.YNc(4,A,3,2,"p-accordionTab",4),t.ALo(5,"keyvalue"),t.qZA()()),2&e&&(t.Q6J("formGroup",o.systemConfigForm),t.xp6(2),t.Q6J("ngIf",o.enableUpdate),t.xp6(1),t.Q6J("multiple",!0),t.xp6(1),t.Q6J("ngForOf",t.lcZ(5,4,o.systemConfigs)))},directives:[a._Y,a.JL,a.sg,f.O5,N.Hq,h.UQ,f.sg,h.US,a.Fj,b.o,a.nD,a.JJ,a.u,I.XZ],pipes:[f.Nd],styles:[""]}),n})();const M=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-system-layout"]],decls:6,vars:0,consts:[[1,"services-container","layout-margin"],[1,"page-title"],[1,"head-icon","pi","pi-cog"],[1,"text"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"span",2),t.TgZ(3,"span",3),t._uU(4,"System Configuration "),t.qZA()(),t._UZ(5,"app-config-list"),t.qZA())},directives:[Z],styles:[""]}),n})()}];let Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.Bz.forChild(M)],d.Bz]}),n})();var D=s(1018);let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.ez,D.m,Y]]}),n})()}}]);