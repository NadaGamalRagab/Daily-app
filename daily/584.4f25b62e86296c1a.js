"use strict";(self.webpackChunkDaily=self.webpackChunkDaily||[]).push([[584],{584:(T,o,n)=>{n.r(o),n.d(o,{ManualAdjustmentModule:()=>M});var u=n(9808),d=n(8753),r=n(267),c=n(9597),a=n(5e3),h=n(3514),m=n(9185),p=n(1081),b=n(111),g=n(6709);const v=[{path:"",redirectTo:"adjustment",pathMatch:"full"},{path:"adjustment",component:(()=>{class e{constructor(t,s,i,y){this.headerService=t,this.validationService=s,this.adjustmentService=i,this.privilegesService=y,this.title="Manual Adjustment",this.adjustmentTable=new r.G,this.headers=[{fieldId:"ratePlan",title:"Rate Plan"},{fieldId:"opening",title:"Opening",classStyle:"green tab-style"},{fieldId:"closing",title:"Closing",classStyle:"blue tab-style"},{fieldId:"variance",title:"Variance",classStyle:"red tab-style"}],this.extraCols=[{fieldId:"numberOfSubs",label:"Num Of Subs",title:"Export as Excel",show:!0,type:"input",inputType:"number"},{fieldId:"trxTypeKey",title:"search",type:"dropdown",data:[],optionLabel:"",show:!0,placeholder:"Transaction Type"}]}ngOnInit(){this.enableUpdatePatch=this.privilegesService.checkPrivileges(c.$.MANUAL_ADJUSTMENT.UPDATE),this.validationService.retrieveTransactionTypes().subscribe(t=>{this.extraCols[0].data=t.payload.transactionModelList,this.extraCols[0].optionLabel=this.extraCols[1].optionLabel="trxTypeName",this.extraCols[1].data=t.payload.transactionModelList}),this.epochDate=localStorage.getItem("date"),this.getData(),this.dateSubscription=this.headerService.DateSubject.subscribe(t=>{this.epochDate=t,this.getData()})}fillTable(t){this.originalData=JSON.parse(JSON.stringify(t)),this.adjustmentTable.cols=this.headers,this.adjustmentTable.extracols=this.extraCols,this.adjustmentTable.pagination=!0,this.adjustmentTable.name="manualAdjustment",this.adjustmentTable.data=t,this.adjustmentTable.lockFlag=!1,this.adjustmentTable.editFlag=!1,this.adjustmentTable.deleteFlag=!1,this.adjustmentTable.hasSubmit=!0,this.adjustmentTable.globalFilterFields=["ratePlan","opening","closing","variance"]}getData(){this.manualSubscr=this.adjustmentService.getManualAdjustment(this.epochDate).subscribe(t=>{var s;this.tableData=t.payload,null===(s=this.tableData)||void 0===s||s.map(i=>{i.numberOfSubs=-i.variance}),this.fillTable(this.tableData)})}ngOnDestroy(){this.manualSubscr.unsubscribe(),this.dateSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(h.r),a.Y36(m.R),a.Y36(p.G),a.Y36(b.y))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-manual-adjustment"]],decls:7,vars:3,consts:[[1,"layout-margin"],[1,"row","flex","header"],[1,"col-7","flex","pt-4"],[1,"icon-manual"],[1,"text"],[3,"table","enableUpdatePatch","originalData"]],template:function(t,s){1&t&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2),a._UZ(3,"i",3),a.TgZ(4,"span",4),a._uU(5,"Manual Adjustment"),a.qZA()()(),a._UZ(6,"app-table",5),a.qZA()),2&t&&(a.xp6(6),a.Q6J("table",s.adjustmentTable)("enableUpdatePatch",s.enableUpdatePatch)("originalData",s.originalData))},directives:[g.a],styles:[".header[_ngcontent-%COMP%]   .icon-manual[_ngcontent-%COMP%]{color:#142645b3;padding-right:5px;font-size:17px}.header[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--lightBlack);font: 700 17px/17px Cairo;letter-spacing:1.25px}"]}),e})()}];let j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[d.Bz.forChild(v)],d.Bz]}),e})();var f=n(1018);let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[u.ez,j,f.m]]}),e})()}}]);