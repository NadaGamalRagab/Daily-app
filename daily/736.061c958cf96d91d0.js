"use strict";(self.webpackChunkDaily=self.webpackChunkDaily||[]).push([[736],{8736:(R,h,r)=>{r.r(h),r.d(h,{PricesModule:()=>D});var d=r(9808),l=r(8753),u=r(9423),a=r(9597),p=r(2382),g=r(4953),e=r(5e3),m=r(3337),y=r(6458),C=r(1424),O=r(1208),v=r(845),S=r(1401),M=r(9783);function U(i,n){if(1&i&&e._UZ(0,"button",16),2&i){const t=e.oxw();e.Q6J("disabled",!t.pgGroupForm.valid)}}function T(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.priceGroup)}}let G=(()=>{class i{constructor(t,o,s,c){this.pricesService=t,this.route=o,this.router=s,this.footprintService=c,this.sourceList=[],this.targetList=[],this.pageMode="Add",this.urlRoute=g.X.ROUTES.DAILY+"/"+g.X.ROUTES.PRICES+"/"+g.X.ROUTES.PGGROUPS}ngOnInit(){this.getPricesGroups(),this.route.snapshot.params.id&&(this.pgGroupId=this.route.snapshot.params.id,this.viewMode="view"===this.route.snapshot.url[0].path,this.pageMode=this.viewMode?"View ":"Edit"),this.initForm(),"Edit"==this.pageMode&&this.getPgGroupByID()}getPricesGroups(){this.getpricesSubscription=this.pricesService.getAll("prices").subscribe(t=>{this.sourceList=t.payload.priceGroupModel.filter(o=>(null===o.pgGroupKey&&(this.priceGroup={priceGroupKey:o.priceGroupKey,priceGroup:o.priceGroup,priceGroupCode:o.priceGroupCode,pgGroupKey:o.pgGroupKey}),this.priceGroup)),console.log("unassigned priceGroup",this.sourceList)})}getPgGroupByID(){this.getSubscription=this.pricesService.getPgGroupById(this.pgGroupId).subscribe(t=>{console.log("pg",t.payload);let o=t.payload.pgGroupModel,s=t.payload.pgGroupModel;delete s.pgGroupKey;let c=JSON.parse(JSON.stringify(Object.assign(Object.assign({},s),{priceGroupModels:t.payload.priceGroupModelList})));this.footprintService.objectIdentifier=this.pgGroupId,this.footprintService.handleOldValue(c),this.targetList=t.payload.priceGroupModelList?t.payload.priceGroupModelList:[],this.pgGroupForm.patchValue({pgGroup:o.pgGroup,description:o.description,showFlag:o.showFlag,pgGroupKey:o.pgGroupKey}),this.viewMode&&this.pgGroupForm.disable()})}initForm(){this.pgGroupForm=new p.cw({pgGroup:new p.NI(null,p.kI.required),description:new p.NI(null),showFlag:new p.NI,pgGroupKey:new p.NI})}onSubmit(){let t={pgGroup:this.pgGroupForm.value.pgGroup,description:this.pgGroupForm.value.description,showFlag:this.pgGroupForm.value.showFlag},o=Object.assign(Object.assign({},t),{priceGroupModels:this.targetList});if(this.footprintService.handleNewValue(o),"Edit"==this.pageMode){t.pgGroupKey=+this.pgGroupId;let s={pgGroupModel:t,priceGroupModels:this.targetList};console.log("body",s),this.pricesService.managePgGroup(s,!0).subscribe(c=>{console.log("add profile response",c),c.statusCode==g.X.RESPONSE_STATUS.SUCCESS&&this.router.navigateByUrl(this.urlRoute)})}else this.pricesService.managePgGroup({pgGroupModel:t,priceGroupModels:this.targetList}).subscribe(c=>{console.log("add profile response",c),c.statusCode==g.X.RESPONSE_STATUS.SUCCESS&&this.router.navigateByUrl(this.urlRoute)})}ngOnDestroy(){var t,o;null===(t=this.getSubscription)||void 0===t||t.unsubscribe(),null===(o=this.getpricesSubscription)||void 0===o||o.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.g),e.Y36(l.gz),e.Y36(l.F0),e.Y36(y.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-pg-groups"]],decls:25,vars:13,consts:[[1,"add-container"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"pgGroup-form","flex","justify-content-between","wrapper"],[1,"p-float-label"],["id","float-input","type","text","pInputText","","formControlName","pgGroup"],["for","float-input"],[1,"required"],["id","float-input","type","text","pInputText","","formControlName","description","maxlength","50"],[1,"check"],["formControlName","showFlag",3,"binary","trueValue","falseValue"],[1,"check-label"],["pButton","","class","btn btn-basic","type","submit","label","submit",3,"disabled",4,"ngIf"],[1,"picklist-content"],[1,"pickList-title"],["sourceHeader","Unassigned","targetHeader","Assigned","filterBy","name","sourceFilterPlaceholder","Search by name","targetFilterPlaceholder","Search by name",3,"source","target","responsive","dragdrop","showSourceControls","showTargetControls","disabled"],["pTemplate","item"],["pButton","","type","submit","label","submit",1,"btn","btn-basic",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(4,"div",2)(5,"span",3),e._UZ(6,"input",4),e.TgZ(7,"label",5),e._uU(8,"PG Group "),e.TgZ(9,"span",6),e._uU(10,"*"),e.qZA()()(),e.TgZ(11,"span",3),e._UZ(12,"input",7),e.TgZ(13,"label",5),e._uU(14,"Description "),e.qZA()(),e.TgZ(15,"span",8),e._UZ(16,"p-checkbox",9),e.TgZ(17,"label",10),e._uU(18," show Flag"),e.qZA()(),e.YNc(19,U,1,1,"button",11),e.qZA(),e.TgZ(20,"div",12)(21,"span",13),e._uU(22," Assign Price Groups:"),e.qZA(),e.TgZ(23,"p-pickList",14),e.YNc(24,T,2,1,"ng-template",15),e.qZA()()()()),2&t&&(e.xp6(2),e.hij("",o.pageMode," PG Group"),e.xp6(1),e.Q6J("formGroup",o.pgGroupForm),e.xp6(13),e.Q6J("binary",!0)("trueValue",1)("falseValue",0),e.xp6(3),e.Q6J("ngIf",!o.viewMode),e.xp6(4),e.Q6J("source",o.sourceList)("target",o.targetList)("responsive",!0)("dragdrop",!0)("showSourceControls",!1)("showTargetControls",!1)("disabled",o.viewMode))},directives:[p._Y,p.JL,p.sg,p.Fj,C.o,p.JJ,p.u,p.nD,O.XZ,d.O5,v.Hq,S.G,M.jx],styles:[".add-container[_ngcontent-%COMP%]{padding:0 40px 40px}.add-container[_ngcontent-%COMP%]   .pgGroup-form[_ngcontent-%COMP%]{display:inline-flex}.add-container[_ngcontent-%COMP%]   .pgGroup-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:40px}.add-container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{border:1px solid;border-color:#dfdfdf;margin-top:17px;padding:20px;border-radius:12px}.add-container[_ngcontent-%COMP%]   .picklist-content[_ngcontent-%COMP%]{margin-top:15px}.add-container[_ngcontent-%COMP%]   .picklist-content[_ngcontent-%COMP%]   .pickList-title[_ngcontent-%COMP%]{font-weight:600;color:var(--primaryColor)}"]}),i})();var P=r(111),b=r(2517),f=r(365);function A(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().addPgGroup()}),e.qZA()()}}let Z=(()=>{class i{constructor(t,o){this.router=t,this.privilegesService=o,this.inputs=[{label:"PG Group",controlName:"pgGroup",type:"text"},{label:"Description",controlName:"description",type:"text"},{label:"Show Flag",controlName:"showFlag",type:"checkbox",disabled:!0}]}ngOnInit(){this.enableAdd=this.privilegesService.checkPrivileges(a.$.PG_GROUP.ADD),this.enableUpdate=this.privilegesService.checkPrivileges(a.$.PG_GROUP.UPDATE),this.viewDetails=this.privilegesService.checkPrivileges(a.$.PG_GROUP.GET_BY_ID),this.enableDelete=this.privilegesService.checkPrivileges(a.$.PG_GROUP.DELETE)}addPgGroup(){this.router.navigateByUrl("daily/prices/add")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.F0),e.Y36(P.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-prices-group"]],decls:3,vars:9,consts:[[3,"source","inputs","isInline"],["class","row align pt-3 pb-3",4,"ngIf"],[3,"source","inputs","enableUpdate","enableDelete","viewDetails"],[1,"row","align","pt-3","pb-3"],["pButton","","type","button","label","Add PG Group",1,"btn","btn-basic","right-0",3,"click"]],template:function(t,o){1&t&&(e._UZ(0,"app-service-form",0),e.YNc(1,A,2,0,"div",1),e._UZ(2,"app-services-list",2)),2&t&&(e.Q6J("source","pgGroups")("inputs",o.inputs)("isInline",!0),e.xp6(1),e.Q6J("ngIf",o.enableAdd),e.xp6(1),e.Q6J("source","pgGroups")("inputs",o.inputs)("enableUpdate",o.enableUpdate)("enableDelete",o.enableDelete)("viewDetails",o.viewDetails))},directives:[b.I,d.O5,v.Hq,f.Q],styles:[".align[_ngcontent-%COMP%]{text-align:right}"]}),i})(),I=(()=>{class i{constructor(t,o){this.pricesService=t,this.privilegesService=o,this.inputs=[{label:"Price Group",controlName:"priceGroup",type:"text"},{label:"PG Group",controlName:"pgGroup",type:"text"}]}ngOnInit(){this.enableUpdate=this.privilegesService.checkPrivileges(a.$.PRICE_GROUP.UPDATE),this.pgSubcription=this.pricesService.getAll("pgPrices").subscribe(t=>{console.log("get All pgPrices For dropdown",t.payload.allPriceGroupGroupsResponses),this.listInputs=[{label:"Price Group",controlName:"priceGroup",type:"text"},{label:"PG Group",controlName:"pgGroup",type:"text"},{label:"PG Group Key",controlName:"pgKey",type:"dropDown",options:t.payload.allPriceGroupGroupsResponses.map(o=>({id:o.pgGroup,value:o.pgGroupKey}))}]})}ngOnDestroy(){var t;null===(t=this.pgSubcription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.g),e.Y36(P.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-prices-list"]],decls:2,vars:6,consts:[[3,"source","inputs","isInline"],[3,"source","inputs","enableUpdate"]],template:function(t,o){1&t&&e._UZ(0,"app-service-form",0)(1,"app-services-list",1),2&t&&(e.Q6J("source","prices")("inputs",o.inputs)("isInline",!0),e.xp6(1),e.Q6J("source","prices")("inputs",o.listInputs)("enableUpdate",o.enableUpdate))},directives:[b.I,f.Q],styles:[""]}),i})();var x=r(3542);const L=[{path:"",component:(()=>{class i{constructor(){}ngOnInit(){this.items=[{label:"Prices Groups",routerLink:["groups"],routerLinkActiveOptions:"{ exact: true }"},{label:"PG Groups",routerLink:["pgGroups"],routerLinkActiveOptions:"{ exact: true }"}]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-prices-layout"]],decls:8,vars:1,consts:[[1,"services-container","layout-margin"],[1,"page-title"],[1,"icon-rateplan","head-icon"],[1,"head-font"],[1,"tab-sec"],[3,"model"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"span",2),e.TgZ(3,"span",3),e._uU(4,"Manage Prices Groups "),e.qZA()(),e.TgZ(5,"div",4),e._UZ(6,"p-tabMenu",5),e.qZA(),e._UZ(7,"router-outlet"),e.qZA()),2&t&&(e.xp6(6),e.Q6J("model",o.items))},directives:[x.d,l.lC],styles:[".services-container[_ngcontent-%COMP%]{padding:0 9px}.services-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   .icon-rateplan[_ngcontent-%COMP%]{font-size:19px}.services-container[_ngcontent-%COMP%]   .tab-sec[_ngcontent-%COMP%]{display:inline-flex;width:100%}.services-container[_ngcontent-%COMP%]   .tab-sec[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{line-height:.5}"]}),i})(),children:[{path:"",redirectTo:"groups",pathMatch:"full"},{path:"groups",component:I,canActivate:[u.C],data:{privilege:a.$.PRICE_GROUP.GET_ALL}},{path:"pgGroups",component:Z,canActivate:[u.C],data:{privilege:a.$.PG_GROUP.GET_ALL}},{path:"add",component:G,canActivate:[u.C],data:{privilege:a.$.PG_GROUP.ADD}},{path:"edit/:id",component:G,canActivate:[u.C],data:{privilege:a.$.PG_GROUP.UPDATE}},{path:"view/:id",component:G,canActivate:[u.C],data:{privilege:a.$.PG_GROUP.GET_BY_ID}}]}];let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[l.Bz.forChild(L)],l.Bz]}),i})();var F=r(1018);let D=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,w,F.m]]}),i})()}}]);