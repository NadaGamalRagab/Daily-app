"use strict";(self.webpackChunkDaily=self.webpackChunkDaily||[]).push([[760],{3760:(D,m,n)=>{n.r(m),n.d(m,{ProfilesModule:()=>E});var c=n(9808),a=n(8753),d=n(9423),p=n(9597),r=n(2382),f=n(4953),e=n(5e3),u=n(9291),P=n(6458),C=n(1424),v=n(845),M=n(1401),A=n(9783);function T(i,s){if(1&i&&e._UZ(0,"button",13),2&i){const t=e.oxw();e.Q6J("disabled",!t.profileForm.valid)}}function S(i,s){1&i&&e._UZ(0,"button",14)}function y(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Oqu(t.name)}}let g=(()=>{class i{constructor(t,o,l,h){this.profilesService=t,this.route=o,this.router=l,this.footprintService=h,this.sourceList=[],this.targetList=[],this.pageMode="Add",this.urlRoute=f.X.ROUTES.DAILY+"/"+f.X.ROUTES.PROIFLES+"/"+f.X.ROUTES.LIST,this.isActive=1}ngOnInit(){this.route.snapshot.params.id&&(this.profileId=this.route.snapshot.params.id,this.viewMode="view"===this.route.snapshot.url[0].path,this.pageMode=this.viewMode?"View ":"edit"),this.initForm(),"edit"==this.pageMode?this.getProfileByID():this.getPrivilieges()}unassignedPrivileges(t){return this.targetList.forEach(o=>{t=t.filter(l=>l.id!==o.id)}),t}getPrivilieges(){this.profilesService.getPrivilegesList().subscribe(t=>{this.sourceList=this.unassignedPrivileges(t.payload.privileges)})}getProfileByID(){this.getSubscription=this.profilesService.getProfileById(this.profileId).subscribe(t=>{let o=t.payload.profile;this.footprintService.objectIdentifier=o.id;let l={name:o.name,isActive:o.isActive,privileges:o.privileges};l=JSON.parse(JSON.stringify(l)),console.log("profileClone",l),this.footprintService.handleOldValue(l),this.targetList=o.privileges,this.isActive=o.isActive,this.getPrivilieges(),this.profileForm.patchValue({name:o.name}),this.viewMode&&this.profileForm.disable()})}initForm(){this.profileForm=new r.cw({name:new r.NI(null,r.kI.required)})}onSubmit(){let t={name:this.profileForm.value.name,isActive:this.isActive,privileges:this.targetList};"edit"==this.pageMode?(this.footprintService.handleNewValue(t),t.id=this.profileId,this.profilesService.manageProfile(t,this.pageMode).subscribe(o=>{console.log("add profile response",o),0==o.statusCode&&this.router.navigateByUrl(this.urlRoute)})):(this.footprintService.handleNewValue(t),this.profilesService.manageProfile(t).subscribe(o=>{console.log("add profile response",o),0==o.statusCode&&this.router.navigateByUrl(this.urlRoute)})),console.log("Profile",t),console.log("Source list",this.sourceList),console.log("Target list",this.targetList)}ngOnDestroy(){var t;null===(t=this.getSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.L),e.Y36(a.gz),e.Y36(a.F0),e.Y36(P.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-profile"]],decls:18,vars:11,consts:[[1,"add-container"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"profile-form"],[1,"p-float-label"],["id","float-input","type","text","pInputText","","formControlName","name","maxlength","50"],["for","float-input"],[1,"required"],["pButton","","class","btn btn-basic","type","submit","label","submit",3,"disabled",4,"ngIf"],["pButton","","pRipple","","type","Cancel","label","Cancel","class","p-button-danger p-button-text white-button","routerLink","/daily/profiles/list",4,"ngIf"],[1,"picklist-content"],[1,"pickList-title"],["sourceHeader","Unassigned","targetHeader","Assigned","filterBy","name","sourceFilterPlaceholder","Search by name","targetFilterPlaceholder","Search by name",3,"source","target","responsive","dragdrop","showSourceControls","showTargetControls","disabled"],["pTemplate","item"],["pButton","","type","submit","label","submit",1,"btn","btn-basic",3,"disabled"],["pButton","","pRipple","","type","Cancel","label","Cancel","routerLink","/daily/profiles/list",1,"p-button-danger","p-button-text","white-button"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(4,"div",2)(5,"span",3),e._UZ(6,"input",4),e.TgZ(7,"label",5),e._uU(8,"Profile Name "),e.TgZ(9,"span",6),e._uU(10,"*"),e.qZA()()(),e.YNc(11,T,1,1,"button",7),e.YNc(12,S,1,0,"button",8),e.qZA(),e.TgZ(13,"div",9)(14,"span",10),e._uU(15," Assign Privileges:"),e.qZA(),e.TgZ(16,"p-pickList",11),e.YNc(17,y,2,1,"ng-template",12),e.qZA()()()()),2&t&&(e.xp6(2),e.hij("",o.pageMode,"Profile"),e.xp6(1),e.Q6J("formGroup",o.profileForm),e.xp6(8),e.Q6J("ngIf",!o.viewMode),e.xp6(1),e.Q6J("ngIf",!o.viewMode),e.xp6(4),e.Q6J("source",o.sourceList)("target",o.targetList)("responsive",!0)("dragdrop",!0)("showSourceControls",!1)("showTargetControls",!1)("disabled",o.viewMode))},directives:[r._Y,r.JL,r.sg,r.Fj,C.o,r.JJ,r.u,r.nD,c.O5,v.Hq,a.rH,M.G,A.jx],styles:[".add-container[_ngcontent-%COMP%]{padding:0 40px 40px}.add-container[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]{display:inline-flex}.add-container[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:40px}.add-container[_ngcontent-%COMP%]   .picklist-content[_ngcontent-%COMP%]{margin-top:15px}.add-container[_ngcontent-%COMP%]   .picklist-content[_ngcontent-%COMP%]   .pickList-title[_ngcontent-%COMP%]{font-weight:600;color:var(--primaryColor)}"]}),i})();var L=n(267),b=n(111),O=n(6709);let I=(()=>{class i{constructor(t,o,l){this.profilesService=t,this.router=o,this.privilegesService=l,this.profilesTable=new L.G,this.profilesList=[],this.headers=[{fieldId:"name",title:"Profile"}],this.extraCols=[{fieldId:"lockFlag",title:"Actions",show:!0},{fieldId:"search",title:"search",show:!0}]}ngOnInit(){this.enableUpdate=this.privilegesService.checkPrivileges(p.$.PROFILES_MANAGMENT.UPDATE),this.enableDelete=this.privilegesService.checkPrivileges(p.$.PROFILES_MANAGMENT.DELETE),this.viewDetails=this.privilegesService.checkPrivileges(p.$.PROFILES_MANAGMENT.GET_BY_ID),this.profilesService.showSubject.next(this.router.url.includes("list")),this.listSubscription=this.profilesService.getProfilesList().subscribe(t=>{console.log("ProfilesList",t.payload.profilesList),this.profilesList=t.payload.profilesList,this.fillTable()})}fillTable(){this.profilesTable.cols=this.headers,this.profilesTable.extracols=this.extraCols,this.profilesTable.pagination=!0,this.profilesTable.lockFlag=!0,this.profilesTable.editFlag=!0,this.profilesTable.deleteFlag=!0,this.profilesTable.name="profiles",this.profilesTable.globalFilterFields=["name"],this.profilesTable.data=this.profilesList}ngOnDestroy(){var t;null===(t=this.listSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.L),e.Y36(a.F0),e.Y36(b.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profiles-list"]],decls:2,vars:4,consts:[[1,"mt-3"],[3,"table","enableDelete","enableUpdate","viewDetails"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-table",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("table",o.profilesTable)("enableDelete",o.enableDelete)("enableUpdate",o.enableUpdate)("viewDetails",o.viewDetails))},directives:[O.a],styles:[""]}),i})();function F(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addProfile()}),e.qZA()}}function w(i,s){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,F,1,0,"button",8),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.enableAdd)}}const Z=[{path:"",component:(()=>{class i{constructor(t,o,l,h){this.router=t,this.profilesService=o,this.cdr=l,this.privilegesService=h}ngOnInit(){this.enableAdd=this.privilegesService.checkPrivileges(p.$.PROFILES_MANAGMENT.ADD),this.showSubscription=this.profilesService.showSubject.subscribe(t=>{this.showBtn=t,this.cdr.detectChanges()})}addProfile(){this.router.navigateByUrl("daily/profiles/add"),this.showBtn=!1}ngOnDestroy(){var t;null===(t=this.showSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.F0),e.Y36(u.L),e.Y36(e.sBO),e.Y36(b.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profiles-management"]],decls:9,vars:1,consts:[[1,"layout-margin"],[1,"page-header"],[1,"page-title"],[1,"icon-profiles","head-icon"],[1,"head-font"],["class","page-action",4,"ngIf"],[1,"router-content"],[1,"page-action"],["pButton","","pRipple","","type","button","label","+ Add New Profile","class","p-button-danger p-button-text white-button",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","+ Add New Profile",1,"p-button-danger","p-button-text","white-button",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e._uU(5," Profiles Management"),e.qZA()(),e.YNc(6,w,2,1,"div",5),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"router-outlet"),e.qZA()()),2&t&&(e.xp6(6),e.Q6J("ngIf",o.showBtn))},directives:[c.O5,v.Hq,a.lC],styles:[".layout-margin[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:0 9px;display:flex;justify-content:space-between}.layout-margin[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-action[_ngcontent-%COMP%]{padding-right:89px}"]}),i})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:I},{path:"add",component:g,canActivate:[d.C],data:{privilege:p.$.PROFILES_MANAGMENT.ADD}},{path:"edit/:id",component:g,canActivate:[d.C],data:{privilege:p.$.PROFILES_MANAGMENT.UPDATE}},{path:"view/:id",component:g,canActivate:[d.C],data:{privilege:p.$.PROFILES_MANAGMENT.GET_BY_ID}}]}];let x=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[a.Bz.forChild(Z)],a.Bz]}),i})();var N=n(1018);let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.ez,x,N.m]]}),i})()}}]);