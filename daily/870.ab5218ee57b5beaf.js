"use strict";(self.webpackChunkDaily=self.webpackChunkDaily||[]).push([[870],{3870:(E,g,r)=>{r.r(g),r.d(g,{RateplansModule:()=>I});var c=r(9808),p=r(8753),e=r(5e3),y=r(3542);let G=(()=>{class a{constructor(){}ngOnInit(){this.items=[{label:"Rateplans",routerLink:["rateplans"],routerLinkActiveOptions:"{ exact: true }"},{label:"Rateplans Groups",routerLink:["rateplansGroups"],routerLinkActiveOptions:"{ exact: true }"}]}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-rateplans-layout"]],decls:8,vars:1,consts:[[1,"services-container","layout-margin"],[1,"page-title"],[1,"icon-mark","head-icon"],[1,"head-font"],[1,"tab-sec"],[3,"model"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"span",2),e.TgZ(3,"span",3),e._uU(4,"Manage Rateplanes"),e.qZA()(),e.TgZ(5,"div",4),e._UZ(6,"p-tabMenu",5),e.qZA(),e._UZ(7,"router-outlet"),e.qZA()),2&t&&(e.xp6(6),e.Q6J("model",n.items))},directives:[y.d,p.lC],styles:[""]}),a})();var i=r(9597),m=r(111),h=r(2517),v=r(845),b=r(365);function R(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addRateplaneGroup()}),e.qZA()}}function P(a,o){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-service-form",1),e.TgZ(2,"div",2),e.YNc(3,R,1,0,"button",3),e.qZA(),e._UZ(4,"app-services-list",4),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("source","rateplansGroups")("inputs",t.inputs)("isInline",!0),e.xp6(2),e.Q6J("ngIf",t.enableAdd),e.xp6(1),e.Q6J("source","rateplansGroups")("inputs",t.inputs)("enableUpdate",t.enableUpdate)("enableDelete",t.enableDelete)("viewDetails",t.viewDetails)}}let C=(()=>{class a{constructor(t,n){this.router=t,this.privilegesService=n,this.inputs=[{label:"Rateplan Group",controlName:"ratePlanGroup",type:"text"},{label:"Description",controlName:"description",type:"text"},{label:"Show Flag",controlName:"showFlag",type:"checkbox",readOnly:!0}]}ngOnInit(){this.enableAdd=this.privilegesService.checkPrivileges(i.$.RATE_PLANS_GROUP.ADD),this.enableUpdate=this.privilegesService.checkPrivileges(i.$.RATE_PLANS_GROUP.UPDATE),this.enableDelete=this.privilegesService.checkPrivileges(i.$.RATE_PLANS_GROUP.DELETE),this.viewDetails=this.privilegesService.checkPrivileges(i.$.RATE_PLANS_GROUP.GET_BY_ID)}addRateplaneGroup(){this.router.navigateByUrl("daily/rateplans/rateplansGroups/add")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.F0),e.Y36(m.y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-rateplan-groups-list"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"source","inputs","isInline"],[1,"row","align","pt-3","pb-3"],["pButton","","class","btn btn-basic right-0","type","button","label","Add Rateplane Group",3,"click",4,"ngIf"],[3,"source","inputs","enableUpdate","enableDelete","viewDetails"],["pButton","","type","button","label","Add Rateplane Group",1,"btn","btn-basic","right-0",3,"click"]],template:function(t,n){1&t&&e.YNc(0,P,5,9,"div",0),2&t&&e.Q6J("ngIf",null==n.inputs?null:n.inputs.length)},directives:[c.O5,h.I,v.Hq,b.Q],styles:[".align[_ngcontent-%COMP%]{text-align:right}"]}),a})();var f=r(1121);function A(a,o){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-service-form",1)(2,"app-services-list",2),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("source","rateplans")("inputs",t.inputs),e.xp6(1),e.Q6J("source","rateplans")("inputs",t.inputs)("enableUpdate",t.enableUpdate)}}let T=(()=>{class a{constructor(t,n){this.rateplansService=t,this.privilegesService=n,this.inputs=[]}ngOnInit(){this.enableUpdate=this.privilegesService.checkPrivileges(i.$.RATE_PLANS.UPDATE_lIST),this.rateplansService.getAllRatePlanGroups().subscribe(t=>{this.allRatePlansGroups=t.payload,console.log(this.allRatePlansGroups),this.inputs=[{label:"Rateplan Name",controlName:"ratePlan",type:"text"},{label:"Type",controlName:"ratePlanType",type:"dropDown",options:[{id:"Prepaid",value:1},{id:"Postpaid",value:2}],readOnly:!0},{label:"Contract Type",controlName:"contractType",type:"dropDown",options:[{id:"Consumer",value:1},{id:"Enterprise",value:2},{id:"All",value:3}],readOnly:!0},{label:"Rateplan Group",controlName:"ratePlanGroupKey",type:"dropDown",options:this.allRatePlansGroups},{label:"Activation Source",controlName:"activationSourceFlag",type:"checkbox",disabled:!0,readOnly:!0},{label:"Show Flag",controlName:"showFlag",type:"checkbox"}]})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(f.k),e.Y36(m.y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-rateplans-list"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"source","inputs"],[3,"source","inputs","enableUpdate"]],template:function(t,n){1&t&&e.YNc(0,A,3,5,"div",0),2&t&&e.Q6J("ngIf",null==n.inputs?null:n.inputs.length)},directives:[c.O5,h.I,b.Q],styles:[""]}),a})();var l=r(2382),x=r(6458),L=r(1424),S=r(1208),M=r(1401),Z=r(9783);function O(a,o){if(1&a&&e._UZ(0,"button",17),2&a){const t=e.oxw();e.Q6J("disabled",!t.rateplaneGroupForm.valid)}}function U(a,o){1&a&&e._UZ(0,"button",18)}function N(a,o){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.xp6(1),e.Oqu(null==t?null:t.ratePlan)}}let d=(()=>{class a{constructor(t,n,s,D){this.route=t,this.router=n,this.rateplansService=s,this.footprintService=D,this.pageMode="Add",this.sourceList=[],this.targetList=[]}ngOnInit(){this.route.snapshot.params.id&&(this.rateplanGroupKey=this.route.snapshot.params.id,this.viewMode="view"===this.route.snapshot.url[1].path,this.pageMode=this.viewMode?"View ":"Edit"),this.rateplansService.getAllRatePlans().subscribe(t=>{this.sourceList=t.payload.filter(n=>!n.ratePlanGroupKey),console.log(this.sourceList)}),this.initForm(),"Edit"==this.pageMode&&this.getRateplaneGroupByKey()}initForm(){this.rateplaneGroupForm=new l.cw({ratePlanGroup:new l.NI(null,l.kI.required),description:new l.NI(null),showFlag:new l.NI(null)})}getRateplaneGroupByKey(){this.rateplansService.getRateplaneGroup(this.rateplanGroupKey).subscribe(t=>{let n=t.payload,s=JSON.parse(JSON.stringify(t.payload));console.log("get rateplan by key",s),this.footprintService.objectIdentifier=this.rateplanGroupKey,this.footprintService.handleOldValue(s),this.rateplaneGroupForm.patchValue({description:n.description,ratePlanGroup:n.ratePlanGroup,showFlag:n.showFlag}),this.targetList=n.ratePlans,this.viewMode&&this.rateplaneGroupForm.disable()})}onSubmit(){let t=Object.assign(Object.assign({},this.rateplaneGroupForm.value),{showFlag:null==this.rateplaneGroupForm.value.showFlag?0:1,ratePlans:this.targetList.map(n=>({ratePlanCode:n.ratePlanCode}))});"Edit"==this.pageMode?(t=Object.assign(Object.assign({ratePlanGroupKey:parseInt(this.rateplanGroupKey)},this.rateplaneGroupForm.value),{ratePlans:this.targetList.map(n=>({ratePlanCode:n.ratePlanCode,ratePlanGroupKey:parseInt(this.rateplanGroupKey)}))}),this.footprintService.handleNewValue(t),this.rateplansService.updateRatePlanGroup(t).subscribe(n=>{this.router.navigateByUrl("daily/rateplans/rateplansGroups")})):(this.footprintService.handleNewValue(t),this.rateplansService.createRateplanGroup(t).subscribe(n=>{this.router.navigateByUrl("daily/rateplans/rateplansGroups")}))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(f.k),e.Y36(x.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manage-rateplan-group"]],decls:27,vars:14,consts:[[1,"add-container"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"profile-form","flex","justify-content-between","wrapper"],[1,"p-float-label"],["id","float-input","type","text","pInputText","","formControlName","ratePlanGroup","maxlength","50"],["for","float-input"],[1,"required"],["id","float-input","type","text","pInputText","","formControlName","description","maxlength","50"],[1,"check"],["formControlName","showFlag",3,"binary","trueValue","falseValue"],[1,"check-label"],["pButton","","class","btn btn-basic","type","submit","label","submit",3,"disabled",4,"ngIf"],["pButton","","pRipple","","type","Cancel","label","Cancel","class","p-button-danger p-button-text white-button","routerLink","/daily/rateplans/rateplansGroups",4,"ngIf"],[1,"picklist-content"],[1,"pickList-title","pt-3","pb-3"],["sourceHeader","Unassigned Rateplans","targetHeader","Assigned Rateplans","filterBy","ratePlan","sourceFilterPlaceholder","Search by name","targetFilterPlaceholder","Search by name",3,"source","target","responsive","dragdrop","showSourceControls","showTargetControls","disabled"],["pTemplate","item"],["pButton","","type","submit","label","submit",1,"btn","btn-basic",3,"disabled"],["pButton","","pRipple","","type","Cancel","label","Cancel","routerLink","/daily/rateplans/rateplansGroups",1,"p-button-danger","p-button-text","white-button"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(4,"div",2)(5,"span",3),e._UZ(6,"input",4),e.TgZ(7,"label",5),e._uU(8,"Rateplane Group Name "),e.TgZ(9,"span",6),e._uU(10,"*"),e.qZA()()(),e.TgZ(11,"span",3),e._UZ(12,"input",7),e.TgZ(13,"label",5),e._uU(14,"Rateplane Group Describtion "),e.qZA()(),e.TgZ(15,"span",8),e._UZ(16,"p-checkbox",9),e.TgZ(17,"label",10),e._uU(18,"Show Flag "),e.qZA()(),e.TgZ(19,"div"),e.YNc(20,O,1,1,"button",11),e.YNc(21,U,1,0,"button",12),e.qZA()(),e.TgZ(22,"div",13)(23,"span",14),e._uU(24," Assign Rateplans:"),e.qZA(),e.TgZ(25,"p-pickList",15),e.YNc(26,N,2,1,"ng-template",16),e.qZA()()()()),2&t&&(e.xp6(2),e.hij("",n.pageMode," Rateplan Group"),e.xp6(1),e.Q6J("formGroup",n.rateplaneGroupForm),e.xp6(13),e.Q6J("binary",!0)("trueValue",1)("falseValue",0),e.xp6(4),e.Q6J("ngIf",!n.viewMode),e.xp6(1),e.Q6J("ngIf",!n.viewMode),e.xp6(4),e.Q6J("source",n.sourceList)("target",n.targetList)("responsive",!0)("dragdrop",!0)("showSourceControls",!1)("showTargetControls",!1)("disabled",n.viewMode))},directives:[l._Y,l.JL,l.sg,l.Fj,L.o,l.JJ,l.u,l.nD,S.XZ,c.O5,v.Hq,p.rH,M.G,Z.jx],styles:[".check[_ngcontent-%COMP%]   p-checkbox[_ngcontent-%COMP%]{vertical-align:middle}.check[_ngcontent-%COMP%]   .check-label[_ngcontent-%COMP%]{color:var(--darkGray);padding-left:4px;position:relative;top:1px}.wrapper[_ngcontent-%COMP%]{border:1px solid;border-color:#dfdfdf;margin-top:17px;padding:20px;border-radius:12px}.add-container[_ngcontent-%COMP%]{padding:0 40px 40px}.add-container[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]{display:inline-flex}.add-container[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:40px}.add-container[_ngcontent-%COMP%]   .picklist-content[_ngcontent-%COMP%]{margin-top:15px}.add-container[_ngcontent-%COMP%]   .picklist-content[_ngcontent-%COMP%]   .pickList-title[_ngcontent-%COMP%]{font-weight:600;color:var(--primaryColor)}"]}),a})();var u=r(9423);const w=[{path:"",component:G,children:[{path:"",redirectTo:"rateplans",pathMatch:"full"},{path:"rateplans",component:T,canActivate:[u.C],data:{privilege:i.$.RATE_PLANS.GET_ALL}},{path:"rateplansGroups",component:C,canActivate:[u.C],data:{privilege:i.$.RATE_PLANS_GROUP.GET_ALL}},{path:"rateplansGroups/add",component:d,canActivate:[u.C],data:{privilege:i.$.RATE_PLANS_GROUP.ADD}},{path:"rateplansGroups/edit/:id",component:d,canActivate:[u.C],data:{privilege:i.$.RATE_PLANS_GROUP.UPDATE}},{path:"rateplansGroups/view/:id",component:d,canActivate:[u.C],data:{privilege:i.$.RATE_PLANS_GROUP.GET_BY_ID}}]}];let F=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[p.Bz.forChild(w)],p.Bz]}),a})();var _=r(1018);let I=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[c.ez,F,_.m]]}),a})()}}]);